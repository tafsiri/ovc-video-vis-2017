Hacking Your Health with JavaScript
Alan McLean

>>I want to go ahead and welcome our next speaker to the stage.  Alan.  Alan designs health and fitness experiences that feel personal and inspire action.  Works at the interaction of design engineering for Fitbit.  And build in Strava, and in the New York times graphics department.  So please give him a warm welcome.
[ Applause ]
>> Hey, everybody.  Oh, there you go.  Really happy to be here.  Thank you for having me.  Hacking your health with JavaScript.  It was a title that made a lot of sense a couple months ago.  So, you know, a couple years ago when I left The New York Times, people would come up to me with this question, and it used to kind of freak me out.  And it was� so what do you do?  And I don't know if anyone else shares this feeling, but I felt like I put this face that Larry has on every time.  I started to kind of freak out.  Like� I don't really know.  When I was feeling really confident I would say that I was a visual storyteller.  This seemed to be� this seemed to be the title everyone was using a while ago.  Everyone, at least, that was not a visual journalist.  And when I was feeling really bummed out when I was working on broken JavaScript and stuff that sucked, I said I fixed broken share tools, which happens more often than you might imagine to everyone in this room.  I kind of settled on this title.  That I'm the designgineer.  Enjoy both, the act of design, the act of building and creating.  This kind of fits, and you feel odd telling people this.
I can't claim to be the only one who has come up with this title.
So after I left The New York Times, you know, I was actually drawn to the West Coast to work on health and fitness data visualizations.  I was really passionate about Ironmans and triathlons.  Crazy fit and exercising all the time.  Didn't make sense to be in the news room anymore.  So I worked at Strava and worked with data.  So that was really fun.  And then I had kids, so it made more sense to go to Fitbit.  I love Fitbit, but it fit my life more closely.  I wasn't able to go on 12hour bike rides anymore.  Although I always dreamt I could one day.  And recently, a couple weeks ago, I joined Google's life signs division called Verily.  And this professional angst that I had for a long time, it's still there.  We should probably all have a little professional angst.  But I did find a domain that I'm really interested in.  And that's health and fitness.
And more specifically, just actual real, real health these days.  And why health?  Well, because every day we're getting a little bit close�to the end, guys.
[ Laughter ]
It's almost over.  You never know, right?  I think about this probably more than I should.  And if you are a really optimistic personality, you might think this is a good thing.  Live in the moment.  Or if you're more like me, you might think, oh, jeez.  So now I'm not so much a designgineer.  I'm closer to a project engineer, product designer.  From a project perspective, I'm in a better position of steering a project.  Rather than a pure engineer or pure designer.  How I would typically get is get a data set and play it with it and figure out if there's a unique opportunity.  Why don't we start with one?
I'll do a great project.  Heart rate.  It's a great dataset.  All sorts of great things happen to your heart.  This is from a run around Lake Merritt.  Thirtyfive minutes, 40 minutes.  This is the data.  Pretty standard, nice stream, heart rate data.  There's not that much variance there.  Go a little bit closer, take like a one minute segment of that data.  And you can see it's relatively straight forward.  There's a data point every second.  It's really evenly spaced.  And, of course, this has been smoothed, this has been filter would so we can view it from far out, right?  Every designer always wants a smooth line.  Inevitably, every time you face a mockup, you face a smooth one when you're faced with data and you're faced with garbage.  And go closer.
And with heart rate data, what we see is it's really noisy.  Your heart doesn't beat every second.  It's inconsistent, it's jumping all over the place.  So if we go right into that sample and instead of smoothing it and cleaning it up, and look at instantaneous heart rate, we can start to do some really interesting things.
We're going to go deeper.
[ Laughter ]
Let's get out of the really far out view that we always do with these retrospective graphs and go right into this heart rate data.  And so this is kind of an interesting line.  This is the same one minute segment.  But when with you look at instantaneous heart rate, you can see something happening in your body.  What we're seeing here is the beginning of an inhale, the bottom, and the beginning of an exhale as it falls like this.  What this is, this is respiratory sinus arrhythmia.  This is your heart and your breath getting in alignment.  I'm already using the words that I'm using with meditation.  So let's design a meditation experience.
So one of the magic things in JavaScript lately is the ability to communicate with devices.  So I do this a fair bit.  I've got this chance to stream from a heart rate strap heart rate values, HRV, instantaneous heart rate.  And I can start rendering this out.
This screen is like pushed to the side.  Oh, well.  So this is just heart rate from a stored sample.  I was going to try to do it live on the stage, but I didn't have the confidence.  Definitely a mistake.  So this is records heart rate values.  So I don't really know how to breathe yet.  You know, what the period should be like.  So let's just get rid of that little moving thing on the bottom and give you some kind of guide.  So when this thing contracts, we're exhaling.  And when it's expanding, we're filling ourselves up with air.  We can do this now if you want.
Okay.  So we've got the guide, right?  We know what's happening.  Inhale, exhale.  So I'm going pause it.  And this is the visual�
[ Laughter ]
Why did everyone laugh?  Oh.  Okay.  Right.  Yeah.  This would be the part that would be really hard in a live demo, right?  So what I want to do is show some kind of relationship.  I don't want to draw the heart rate line, that's boring.  But what I can do is add a little bit of an effect to this ring.  Because we know the period this thing is expanding and contracting, we know what your heart is doing, we can see how aligned you are to it.  So with a little bit of Perlin noise and math and smoothing, we can give a nice organic feel around the rings.  I'll let that go for a little bit.  Let it go.  So it's going continue to contract and expand.  And these rings are going to respond to the data.  Oh, audio.
Can I get audio?  Okay.  Well, there's audio in the background.  The nice thing about playing with these great APIs now is that we can actually look at this data and start doing things with it.  We can tell how closely aligned you are, we can fade audio in and out.
That's too bad.  Oh, well.  So we can fade audio in and out with this expanding and contracting guide.  And we could actually play little chimes if you're actually in alignment.
Yeah, seems like it is.  It says it is.  That's okay.  We'll keep going.
All right.  So we continue.  So this is a fairly simplistic visual metaphor to work with.  It's not very precise, and that's on purpose.  So we can keep going and just explore a little bit.  We wanted to go deeper, right?  We just keep going.  So these physical metaphors are really powerful.  I've massacred it in the background somewhere.  And we can start playing again with flocking.  A couple people probably already talked about flocking today.  And we're actually talking about connecting to your body charts and graphs aren't going to be all that helpful.  What we do want to do is think about replicating real phenomenon in nature.  One of the reasons I like these typical concepts.  The Boids algorithm, everyone knows this.  They're really forgiving.  They're powerful because they're not precise.  You can connect with them and not think about if you're doing it right.  The thing that I really like about this particular visualization is, you know, we're feeding your data into it, and the birds are actually responding to how aligned you are.  They'll become a flock if you're really in alignment with this guide.  But if you're not, it's still going to be kind of pretty.
Getting it right with respect to health is kind of a dangerous place to go.  So we'll get rid of the birds.  Good night.  By now you're probably wondering, where are the charts?  Come on, where are the charts, guys?  Well, charts are really poor allies for those looking to improve their health.  There's this component much shame when it comes to health that's really strong and it overrides rational thought.  And we talk about this ahha moment all the time, like can we find that little nugget, that kernel of information that will get someone to go ah, that's interesting.  But what if that little point of interest is, oh, you're extremely obese, or you're dying a little bit more every day.  That's not a ha moment we want you to have.  Maybe for an intervention, once or twice.  But that's going to pick out quickly.  I'm going to pick on BMI.  It's easy to pick on.  And everyone knows it�look at the terms of weight, obese extremely obese, normal.  Is normal really a clinical term?  That's not going to encourage to improve their health.  So that's what I look for.  And I've made these mistakes myself.  I've designed these charts.  I'm going to try to avoid showing too much of.  At Fitbit we designed a feature, cardiovascular fitness.  It's VO2 max.  It's a measure of how fit you are.  This guy's doing a VO2 max test.  As you can see, he's enjoying that.  That line from the top is a harness.  He's expected to run until he completely falls off.  This is a full out effort.  The mask is the volume of oxygen he's utilizing.  There's other ways to get to VO2 max.  I designed these features.  And the natural inclination as a former news person was to find out what does this number mean?  What's good?  What's bad?  I need to know these things.  So I designed this.  We did other research and came up with these categories.  We could define excellent.  You know, your point of reference is if Lance Armstrong is an 88.  That's high.  That's very good.
But then I'm also creating these problems that I was trying to avoid, right?  Like fair and poor and average.  I mean, average is okay.  The majority of you are going to fall.  But it doesn't feel very good.  You are average.
And, you know, for some people, a small percentage of people getting this number, if you're below, say, 30, high 20s, means you need a new heart.  So is it really my� is it really effective for me to be telling you these things?  Is that the kind of information that you want to engage with on a regular basis?  If you need a new heart, you probably already know it, right?  We hope.  Resting heart rate.  Another really interesting graph.  Or data point.  A boring graph, typically.  It's all relative with resting heart rate.  We know that if you're above a certain number you are in deep trouble.  If you're over a hundred, that's an intervention.  That's a clinical intervention and we need to help you right away.  But if you're close to that, or above 80 for the vast majority of people, you're in big trouble.  Why help you once you've already arrived at your end state.  Above a hundred, it's really hard to come back from something like that.  You got to lose a lot of weight.
We want to go preventive, right?  We want to create experiences that prevent you from getting all the way up to a hundred.  So I guess where I've arrived with this information and the process of transitioning from news to product design is that informationrich graphics make for really compelling content if it's about somebody else.  About another place.  But if it's about you?  That's a really different story.
You know, it's funny, when I first arrived I thought all I needed to do was find at ha moment and encourage them to live a better life.  I was more egotistical then.  But the Pokemon go phenomenon, it was more exercise.  It was never designed to encourage exercise.  It was at this point I was having existential angst moments.  What is visualization for?  What are these charts for for the first place?  Changing health outcomes is not about changing minds.  We're not trying to communicate a salient point.  It's about changing behavior.  It's about finding ways to almost deprogram you.  I love this GIF.  I think I would use it as a background if I could.
He's so vacant except for that moment when he looks up.  He's like, oh.  And in a way� in a way we need to become the scare crow if we want to change the way we behave, with respect to health, at least.
This is a challenge that came up at Fitbit with respect to sedentary time.  I'm sorry, but you have been sitting this entire time.  Again, every second you're getting closer to the end.  And it turns out that sedentary time, even if you go and you run a half marathon every day, it's not about that.  It's about prolonged periods of sedentary time.  So you have to move more often.  This was shocking to me.  I was running a lot of the time.
So behavioral psychologists talk about this a lot.  This is a graph from the book about the habit loop.  This is where we start talking about visualization having an opportunity to be useful again.  There's a notion of a habit loop and there's this trigger that will get you to go and do the routine.  There's the routine itself, which can be bad, it can be good.  And then the reward.
The reward is that positive feedback.  And gets you to do it again once that trigger happens again.  So I think that reward component of that loop is where visualization could potentially play a role.
So looking, again, back to just getting like a raw data set, this is sedentary time data.  Create a square for each block of sedentary or active block time.  I'm pretty sure this is a messed up dataset.  It's not capturing sleep correctly.  Point is, start exploring it and look at potential ways to tie into that reward system.  This is actually what I would consider a negative reward.  This is an exploration, but it probably doesn't make sense as a positive reinforcement.  Here we're actually plotting the longest time sitting.
I really bum people out.  I don't know� I love circles.  I love playing with circles.  And, you know, back to physical metaphors, we have this blog.  And it's going to get bigger and bigger and smaller and smaller and shed weight as you move more.  Now, of course, also a bummer.  Because even ended up being a big blob, right?  So moved away from that direction.
And, you know, at the time of these experiments, everyone was doing force directed graphs.  Why not me?  I'm sort of connected to data visualization.  And I started playing around with them too.  This was a prototype.  This was the idea of as you go through the day you acquire and sitting and moving blobs.  And the moving blobs are going to eat the sitting ones.  So you want to get as many of these little beasts as you can.
So the feedback on this was that it was creepy.
[ Laughter ]
So we didn't do this.  I was really pulling for this and it didn't come through.  That's too bad.
I thought this was kind of fun, or kind of coollooking.  But I didn't think anyone would actually respond to it.  This is plotting active time or we're looking at the metabolism.  And if you gain enough active minutes during an hour, we would give you a star.  At the time I, you know, I was pretty skeptical that this would resonate with anybody.  And actually no one knew what the lines were, but they knew it was good to get stars, right?
So we started playing with stars.  And it's funny, the language that people have, when you start giving them like a little nod.  A little kudos, right?  Like how often in the day has someone come up to you and said, hey, you're doing great.  You look good today.  You did a good job.  That never happens nearly enough.  I wish it did.
So that's kind of the role that this visualization took on.
And so a really important component to remember about designing in this habit loop system is that it's not just this retrospective graph at the end.  No one's going to remember that the next day when thing about getting up.  What we ended up coming up with was a system, before the end of the hour, give you a notification.  And if you walked and got enough steps to earn it, you get a well done.  And at the end of the day, we would give you this arc.  A nice bit of green and a star.
We had these retrospective graphs too.  Nobody looks at those.  This is a beloved feature, but the only place people look for these sorts of things is on their wrist.
And so I guess the takeaway there for me is that if you really want to affect change, you have to become part of a larger system.  You have got to concede that information is not enough.
So what about my health?  Some people here know that I've got some health problems.  Well, health problems� I've got health things that I deal with.  I'm diabetic.  I'm epileptic, had a heart ablation.  I've got a couple things going on.  This was me when I was way fitter.  That's why I put the photo in.  Anyway, I'm trying to convey to you that I've had to wear a lot of gear.  That's an insulin pump, a halter strap to monitor my heart.  Some other stuff going on in the background there.
And so the reason I know that had a lot of people don't take care of themselves is not only because there's copious data to support that, it's because I don't either.  And I've got all the motivation and reason to.  I pulled this photo up because I think it's really funny.  It's Valentine's Day a couple years ago.  My wife, Jen, took it.  And before this, about an hour, I was having a grand mal seizure.  And here I am in bed, recovered a little bit.  And beside me is a glucose meter and this thing of chocolates.  What the hell am I doing?  I had a grand mal seizure, I'm diabetic.  And maybe the first thing is to take care of myself?  Not the way my mind works.  Here I am digging into a box of chocolates.  Probably ate the whole thing.  I don't remember.
So over time I started playing with my own data.  I have a continuous glucose meter.  Where is it?  Right here.  It broadcasts a new value to my phone every five minutes.  And these are really shitty data sketches, right?  For a little context, if you don't know diabetes, you want to stay in between the bars.  If it's blue, it's too low, if it's red, it's too high.  And at the bottom here, I'm sort of coloring the day by the volatility of my sugar.  So there's some good days.  There's some really bad ones too.
And, you know, the funny thing is, it was really hard to work with this data, because it's such a drag to look at how shitty you're doing.  It's like a report card on your day every day.  This is the report that Dexcom makes, allows you to analyze days and look at trends.  And I only discovered it recently.  There's some chaos in there, right?
You know, maybe a couple years ago I would have thought, if we can just apply some machine learning magic, we can figure out something really interesting to say to Alan so he'll know what he needs to do.  Well, it doesn't really work like that.  Now that I'm past that point I realize that, you know, I have 30 plus years of experience dealing with my health, and I'm still making the same mistakes.  I had a seizure on Thursday.  At work.  That was pretty traumatic.  It was because I did not sleep enough the night before.
So can we get away from these health report cards?  They're a drag.  Even if you're doing well.  It's almost always going to be negative.  It's not sustainable.  So this is the chance where I get to make fun of my wife who totally punked me by putting her name on my card.  Somehow� I don't know how she did it.  But says Jennifer Daniel underneath it.  But I guess what I'm getting at is we can play with the data, tap into the APIs with JavaScript, scrape it, pull it down.  What I don't want is another unopinionated, voiceless graph.  I want someone I recognize and someone who cares about me.  I need a little bit of human touch here.  When Jen says these things to me, like drink juice or just chill, I'm like, okay.  Usually.
Now, what I'm trying to do is avoid that� see, I'm way up there.  And probably before that giant spike up, I had been dosing insulin like crazy because I see it skyrocketing up.  Often what will happen is I'll overdo it and end up crashing and going low again.  So just chill.
Driving a car while low.  Not a good idea.  I've done it.  I would like to avoid doing it.  The problem with these dataset is especially with diabetes, you get desensitized.  You don't believe the data that you're looking at.  I should know better.  But I have done it regardless.  So when I pull up a view like this on my phone, it's a lot more compelling.
Now, you can also tap into the Google images API and pull up grim stuff.  I kept out the dark images.  If you take the safe search off, you can get brutal crashes.  It works for me.  It could work for you.  Seeing a car that looks just like my Prius, it resonated.
But I also want to feel good, right?  Now, when we talk about that reward system, it's a shame that you cannot hear the audio.  But this is a dancing Doge.  And if I'm doing really well, I get to see the dancing doge.  It's really awesome.
[ Laughter ]
It's natural language.  It's like, you know, super easy, you're doing so great.  No lows, no big deal.  This is what I want to hear.  Not a faceless graph, not something that's boring.  I want to see dancing dogs, right?
So someone was talking recently or Tweeting a talk recently.  He said something that stuck out to me.  I'm going to borrow it.  Code is the means to an end.  And at the end is always people.  And that really resonated.  Because really, you know, we're not designing� we talk about getting familiar with our data, knowing our data.  I've heard that so many times at so many conferences.  We know the data.  That's great.  We know the data.  But we need to know the people we're designing for too.  That's it.  Thank you.
[ Applause ]
